<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<launch>
	<arg name="freq" default="100" />

        <node pkg="osrt_ros" type="OnlineLowerLimb" 	name="ik_lowerbody_node" output="screen" >
		<!-- param name="resample_period" 		value="0.01" / -->
		<param name="model_file" 		value="/catkin_ws/src/osrt_ros/data/FK scaled model.osim" />
		<!--param name="model_file" 		value="scale/model_scaled.osim" / -->
		<param name="imu_base_body" 		value="pelvis" />
		<rosparam param="imu_observation_order" >['torso','pelvis','femur_r','femur_l','tibia_r','tibia_l','talus_r','talus_l']</rosparam>

		<param name="tf_frame_prefix" 		value="imu" />
		<param name="imu_direction_axis" 		value="z" />
		<param name="imu_ground_rotation_x" 		value="-90" />
		<param name="imu_ground_rotation_y" 		value="0" />
		<param name="imu_ground_rotation_z" 		value="0" />
		<param name="rate" 				value="$(arg freq)" />
		<param name="logger_filename_ik" 		value="_ik_lower" />
		<param name="logger_filename_imus" 		value="_imus_lower" />
		<param name="data_save_dir" 		value="/tmp/tests/ik_" />
		
		<remap from="/ik_lowerbody_node/output" 		to="/ik/output"/>
		<remap from="/ik_lowerbody_node/output_filtered" 	to="/ik/output_filtered"/>
		<remap from="/ik_lowerbody_node/out_labels" 		to="/ik/outlabels"/>

		<!-- Filter values for filtered output -->
		<param name="filter_output" 		value="true" />
		<param name="memory" 			value="35" />
		<param name="cutoff_freq" 		value="6" />
		<param name="delay" 			value="14" />
		<param name="spline_order" 		value="3" />

        </node>
	
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="torso"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="pelvis"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="femur_r"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="femur_l"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="tibia_r"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="tibia_l"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="talus_r"/>
	</include>
	<include file="$(find osrt_ros)/launch/ext_quat_avg.launch">
		<arg name="imu_body" value="talus_l"/>
	</include>
</launch>

